package com.orobator.android.gramophone.controller.listeners;import android.app.Fragment;import android.app.FragmentManager;import android.os.Bundle;import android.view.ActionMode;import android.view.Menu;import android.view.MenuInflater;import android.view.MenuItem;import android.view.View;import android.widget.AdapterView;import android.widget.ListAdapter;import android.widget.Toast;import com.orobator.android.gramophone.R;import com.orobator.android.gramophone.model.Album;import com.orobator.android.gramophone.view.fragments.AlbumSongsFragment;public class AlbumClickListener implements AdapterView.OnItemClickListener, AdapterView.OnItemLongClickListener {    private final static String TAG = "AlbumClickListener";    private ListAdapter mListAdapter;    private Fragment mFragment;    private ActionMode mActionMode;    private ActionMode.Callback mActionModeCallback = new ActionMode.Callback() {        @Override        public boolean onCreateActionMode(ActionMode mode, Menu menu) {            // Inflate a menu resource providing context menu items            MenuInflater inflater = mode.getMenuInflater();            inflater.inflate(R.menu.song_context_menu, menu);            return true;        }        @Override        public boolean onPrepareActionMode(ActionMode mode, Menu menu) {            return false;        }        @Override        public boolean onActionItemClicked(ActionMode mode, MenuItem item) {            switch (item.getItemId()) {                case R.id.action_delete:                    Toast.makeText(mFragment.getActivity(), "Delete from SongClickListener(ActionMode.Callback)", Toast.LENGTH_LONG).show();                    mode.finish(); // Action picked, so close the CAB                    return true;                default:                    return false;            }        }        @Override        public void onDestroyActionMode(ActionMode mode) {            // Called when the user exits the action mode            mActionMode = null;        }    };    public AlbumClickListener(ListAdapter listAdapter, Fragment fragment) {        mListAdapter = listAdapter;        mFragment = fragment;    }    @Override    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {        Album album = (Album) mListAdapter.getItem(position);        Bundle args = new Bundle();        args.putString(Album.KEY_ALBUM_NAME, album.getAlbumName());        args.putString(Album.KEY_ALBUM_ARTIST, album.getAlbumArtist());        AlbumSongsFragment albumSongsFragment = new AlbumSongsFragment();        albumSongsFragment.setArguments(args);        FragmentManager fm = mFragment.getActivity().getFragmentManager();        fm.beginTransaction()                .replace(R.id.content_frame, albumSongsFragment)                .addToBackStack(album.getAlbumName())                .commit();    }    @Override    public boolean onItemLongClick(AdapterView<?> parent, View view, int position, long id) {        if (mActionMode != null) {            return false;        }        // Start the CAB using the ActionMode.Callback defined above        mActionMode = mFragment.getActivity().startActionMode(mActionModeCallback);        view.setSelected(true);        return true;    }}