package com.orobator.android.gramophone.view.fragments;import android.app.AlertDialog;import android.app.Dialog;import android.app.DialogFragment;import android.content.DialogInterface;import android.content.Intent;import android.net.Uri;import android.os.Bundle;import android.util.Log;import android.widget.Toast;import com.orobator.android.gramophone.R;import com.orobator.android.gramophone.model.Song;import com.orobator.android.gramophone.view.activities.SongMetadataActivity;import java.io.File;public class MoreSongOptionsDialogFragment extends DialogFragment {    private static final String TAG = "MoreSongOptionsDialogFragment";    private static final int VIEW_METADATA = 0;    private static final int ENQUEUE_ARTIST = 1;    private static final int ENQUEUE_ALBUM = 2;    private static final int ADD_TO_PLAYLIST = 3;    private static final int SHOW_FILE = 4;    private static final int DELETE = 5;    @Override    public Dialog onCreateDialog(Bundle savedInstanceState) {        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());        Bundle args = getArguments();        final Song song = (Song) args.getSerializable(Song.KEY_SONG);        builder.setTitle(song.toString() + " : " + song.getAlbum());        builder.setItems(R.array.swipeview_song_more, new DialogInterface.OnClickListener() {            @Override            public void onClick(DialogInterface dialog, int which) {                switch (which) {                    case VIEW_METADATA:                        Intent metadataIntent = new Intent(getActivity().getApplicationContext(), SongMetadataActivity.class);                        metadataIntent.putExtra(Song.KEY_SONG, song);                        startActivity(metadataIntent);                        break;                    case ENQUEUE_ARTIST:                        Toast.makeText(getActivity(), "Enqueue artist: " + song.getArtist(), Toast.LENGTH_SHORT).show();                        break;                    case ENQUEUE_ALBUM:                        Toast.makeText(getActivity(), "Enqueue Album: " + song.getAlbum() + " - " + song.getAlbumArtist(), Toast.LENGTH_SHORT).show();                        break;                    case ADD_TO_PLAYLIST:                        Toast.makeText(getActivity(), "Add to Playlist: " + song.toString(), Toast.LENGTH_SHORT).show();                        break;                    case SHOW_FILE:                        Intent showFileIntent = new Intent();                        showFileIntent.setAction(Intent.ACTION_VIEW);                        File file = new File(song.getFilePath());                        Uri uri = Uri.fromFile(file);                        Log.d(TAG, uri.getEncodedPath());                        showFileIntent.setData(uri);                        // Verify that the intent will resolve to an activity                        if (showFileIntent.resolveActivity(getActivity().getPackageManager()) != null) {                            startActivity(showFileIntent);                        } else {                            Toast.makeText(getActivity(), "There are no apps available to show this file", Toast.LENGTH_LONG).show();                        }                        break;                    case DELETE:                        Bundle args = new Bundle();                        args.putSerializable(Song.KEY_SONG, song);                        DialogFragment fragment = new DeleteSongAlertDialogFragment();                        fragment.setArguments(args);                        fragment.show(getFragmentManager(), "Delete Song");                    default:                }            }        });        return builder.create();    }}